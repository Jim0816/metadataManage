(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c61a80e8"],{1053:function(e,t,i){"use strict";i("153c")},"153c":function(e,t,i){},"3afc":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"用户名",clearable:""},model:{value:e.searchForm.username,callback:function(t){e.$set(e.searchForm,"username",t)},expression:"searchForm.username"}})],1),i("el-form-item",[i("el-button",{on:{click:e.getUserList}},[e._v("搜索")])],1),i("el-form-item",[e.hasAuth("sys:user:save")?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("新增")]):e._e()],1),i("el-form-item",[i("el-popconfirm",{attrs:{title:"这是确定批量删除吗？"},on:{confirm:function(t){return e.delHandle(null)}}},[e.hasAuth("sys:user:delete")?i("el-button",{attrs:{slot:"reference",type:"danger",disabled:e.delBtlStatu},slot:"reference"},[e._v("批量删除")]):e._e()],1)],1)],1),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"60"}}),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),i("el-table-column",{attrs:{prop:"nodeType",label:"节点类型"}}),i("el-table-column",{attrs:{prop:"defaultName",label:"节点名称"}}),i("el-table-column",{attrs:{prop:"parentId",label:"父节点ID"}}),i("el-table-column",{attrs:{prop:"fieldInfoId",label:"节点信息",width:"400"}}),i("el-table-column",{attrs:{prop:"icon",width:"260px",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.view(t.row)}}},[e._v("查看")]),i("el-divider",{attrs:{direction:"vertical"}}),i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.editHandle(t.row.id)}}},[e._v("编辑")]),i("el-divider",{attrs:{direction:"vertical"}}),[i("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{confirm:function(i){return e.delHandle(t.row.id)}}},[i("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("删除")])],1)]]}}])})],1),i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100],"current-page":e.current,"page-size":e.size,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:"新增字段树",visible:e.dialogVisible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules}},[i("el-form-item",{attrs:{label:"字段类型",rules:e.editFormRules,"label-width":"100px"}},[i("el-select",{attrs:{placeholder:"请选择字段类型"},model:{value:e.editForm.nodeType,callback:function(t){e.$set(e.editForm,"nodeType",t)},expression:"editForm.nodeType"}},[i("el-option",{attrs:{label:"string",value:"string"}}),i("el-option",{attrs:{label:"int",value:"int"}}),i("el-option",{attrs:{label:"long",value:"long"}}),i("el-option",{attrs:{label:"float",value:"float"}}),i("el-option",{attrs:{label:"array",value:"array"}})],1)],1),i("el-form-item",{attrs:{label:"父字段ID",prop:"parentId","label-width":"105px"}},[i("el-input-number",{attrs:{min:0,max:1e4},on:{change:e.handleChange},model:{value:e.editForm.parentId,callback:function(t){e.$set(e.editForm,"parentId",t)},expression:"editForm.parentId"}})],1),i("el-form-item",{attrs:{label:"字段信息ID",prop:"fieldInfoId","label-width":"105px"}},[i("el-input-number",{attrs:{min:0,max:1e4},on:{change:e.handleChange},model:{value:e.editForm.fieldInfoId,callback:function(t){e.$set(e.editForm,"fieldInfoId",t)},expression:"editForm.fieldInfoId"}})],1),i("el-form-item",{attrs:{label:"默认名称",prop:"defaultName","label-width":"105px"}},[i("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.defaultName,callback:function(t){e.$set(e.editForm,"defaultName",t)},expression:"editForm.defaultName"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.resetForm("editForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("确 定")])],1)],1)],1)},l=[],o=(i("4160"),i("159b"),i("f6e6"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card"},[i("ul",e._l(e.treeData,(function(t,n){return i("li",{key:n},[i("div",{staticClass:"item",class:{"line-left":0!==n,"line-right":n!=e.treeData.length-1}},[i("div",{staticClass:"item-name",class:{"line-bottom":t.child&&t.child.length>0,"line-top":!e.treeFirst}},[e.treeFirst?e._e():i("div",{staticClass:"reduce",on:{click:function(t){return e.delChild(n)}}},[e._v("-")]),i("div",[e._v(" "+e._s(t.name)+" ")]),i("div",{staticClass:"plus",on:{click:function(t){return e.addChild(n)}}},[e._v("+")])])]),t.child&&t.child.length>0?i("tree-item",{attrs:{"tree-data":t.child}}):e._e()],1)})),0)])}),r=[],a=(i("a434"),{name:"TreeItem",props:{treeData:{type:Array,default:function(){return[]}},treeFirst:{type:Boolean,default:!1}},data:function(){return{}},created:function(){},methods:{addChild:function(e){this.treeData[e].child?this.treeData[e].child.push({name:"1"}):this.$set(this.treeData[e],"child",[{name:"1"}])},delChild:function(e){this.treeData.splice(e,1)}}}),s=a,c=(i("c577"),i("2877")),u=Object(c["a"])(s,o,r,!1,null,"4155db85",null),d=u.exports,f={name:"FieldTree",components:{TreeItem:d},data:function(){return{treeData:[{name:"1",child:[{name:"2",child:[{name:"1"},{name:"2"}]},{name:"1",child:[{name:"1"},{name:"2"}]}]}],searchForm:{},delBtlStatu:!0,total:0,size:10,current:1,dialogVisible:!1,editForm:{},tableData:[],editFormRules:{nodeType:[{required:!0,message:"请输入节点类型",trigger:"blur"}],parentId:[{required:!0,message:"请输入父字段ID",trigger:"blur"}],fieldInfoId:[{required:!0,message:"请输入字段信息ID",trigger:"blur"}],defaultName:[{required:!0,message:"请输入默认名称",trigger:"blur"}]},multipleSelection:[],roleDialogFormVisible:!1,defaultProps:{children:"children",label:"name"},roleForm:{},roleTreeData:[],treeCheckedKeys:[],checkStrictly:!0}},created:function(){var e=this;this.getUserList(),this.$axios.get("/sys/role/list").then((function(t){e.roleTreeData=t.data.data.records}))},methods:{move:function(e){var t=this,i=e.currentTarget;console.log(i);var n=e.clientX-i.offsetLeft,l=e.clientY-i.offsetTop;document.onmousemove=function(e){var o=e.clientX-n,r=e.clientY-l;t.positionX=r,t.positionY=o,i.style.left=o+"px",i.style.top=r+"px"},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null}},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){console.log("勾选"),console.log(e),this.multipleSelection=e,this.delBtlStatu=0==e.length},handleSizeChange:function(e){console.log("每页 ".concat(e," 条")),this.size=e,this.getUserList()},handleCurrentChange:function(e){console.log("当前页: ".concat(e)),this.current=e,this.getUserList()},resetForm:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1,this.editForm={}},handleClose:function(){this.resetForm("editForm")},getUserList:function(){var e=this;this.$axios.get("/sys/user/list",{params:{username:this.searchForm.username,current:this.current,size:this.size}}).then((function(t){e.tableData=t.data.data.records,e.size=t.data.data.size,e.current=t.data.data.current,e.total=t.data.data.total}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$axios.post("/sys/user/"+(t.editForm.id?"update":"save"),t.editForm).then((function(e){t.$message({showClose:!0,message:"恭喜你，操作成功",type:"success",onClose:function(){t.getUserList()}}),t.dialogVisible=!1}))}))},editHandle:function(e){var t=this;this.$axios.get("/sys/user/info/"+e).then((function(e){t.editForm=e.data.data,t.dialogVisible=!0}))},delHandle:function(e){var t=this,i=[];e?i.push(e):this.multipleSelection.forEach((function(e){i.push(e.id)})),console.log(i),this.$axios.post("/sys/user/delete",i).then((function(e){t.$message({showClose:!0,message:"恭喜你，操作成功",type:"success",onClose:function(){t.getUserList()}})}))},roleHandle:function(e){var t=this;this.roleDialogFormVisible=!0,this.$axios.get("/sys/user/info/"+e).then((function(e){t.roleForm=e.data.data;var i=[];e.data.data.sysRoles.forEach((function(e){i.push(e.id)})),t.$refs.roleTree.setCheckedKeys(i)}))},submitRoleHandle:function(e){var t=this,i=this.$refs.roleTree.getCheckedKeys();console.log(i),this.$axios.post("/sys/user/role/"+this.roleForm.id,i).then((function(e){t.$message({showClose:!0,message:"恭喜你，操作成功",type:"success",onClose:function(){t.getUserList()}}),t.roleDialogFormVisible=!1}))},repassHandle:function(e,t){var i=this;this.$confirm("将重置用户【"+t+"】的密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.$axios.post("/sys/user/repass",e).then((function(e){i.$message({showClose:!0,message:"恭喜你，操作成功",type:"success",onClose:function(){}})}))}))}}},m=f,h=(i("1053"),Object(c["a"])(m,n,l,!1,null,"9a16ef08",null));t["default"]=h.exports},8418:function(e,t,i){"use strict";var n=i("c04e"),l=i("9bf2"),o=i("5c6c");e.exports=function(e,t,i){var r=n(t);r in e?l.f(e,r,o(0,i)):e[r]=i}},"841d":function(e,t,i){},a434:function(e,t,i){"use strict";var n=i("23e7"),l=i("23cb"),o=i("a691"),r=i("50c4"),a=i("7b0b"),s=i("65f0"),c=i("8418"),u=i("1dde"),d=i("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,p=Math.min,g=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var i,n,u,d,f,m,v=a(this),y=r(v.length),F=l(e,y),C=arguments.length;if(0===C?i=n=0:1===C?(i=0,n=y-F):(i=C-2,n=p(h(o(t),0),y-F)),y+i-n>g)throw TypeError(b);for(u=s(v,n),d=0;d<n;d++)f=F+d,f in v&&c(u,d,v[f]);if(u.length=n,i<n){for(d=F;d<y-n;d++)f=d+n,m=d+i,f in v?v[m]=v[f]:delete v[m];for(d=y;d>y-n+i;d--)delete v[d-1]}else if(i>n)for(d=y-n;d>F;d--)f=d+n-1,m=d+i-1,f in v?v[m]=v[f]:delete v[m];for(d=0;d<i;d++)v[d+F]=arguments[d+2];return v.length=y-n+i,u}})},c577:function(e,t,i){"use strict";i("841d")},f6e6:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return o}));var n=i("a27e"),l=function(e){return Object(n["a"])({url:"/field/remove",method:"post",data:e})},o=function(e){return Object(n["a"])({url:"/field/page",method:"post",data:e})}}}]);
//# sourceMappingURL=chunk-c61a80e8.7ca47f6d.js.map